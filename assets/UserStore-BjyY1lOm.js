import{i as u,r,h as s}from"./index-CmJovJap.js";import{s as c}from"./Toast-BGAkXIA8.js";const d=u("userStore",()=>{const e=r(""),o=r(""),a=r(!1);return{token:e,nickname:o,isLogin:a,login:(t,n)=>s.post("https://todoo.5xcamp.us/users/sign_in",{user:{email:t,password:n}}).then(l=>(c("success","登入成功"),e.value=l.headers.authorization,o.value=l.data.nickname,a.value=!0,localStorage.setItem("token",e.value),localStorage.setItem("nickname",o.value),s.defaults.headers.common.Authorization=e.value,!0)).catch(()=>!1),logout:()=>{e.value="",o.value="",a.value=!1,localStorage.removeItem("token"),localStorage.removeItem("nickname"),delete s.defaults.headers.common.Authorization},checkLogin:()=>{const t=localStorage.getItem("token"),n=localStorage.getItem("nickname");t&&n&&(e.value=t,o.value=n,a.value=!0,s.defaults.headers.common.Authorization=t)}}});export{d as u};
