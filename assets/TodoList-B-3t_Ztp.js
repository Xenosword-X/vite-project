import{k as W,r as A,l as z,j as p,u as E,m as w,c as g,a as t,d as V,_ as Y,t as u,b as n,w as y,v as b,n as L,g as f,p as T,F as j,q as O,h as B,o as x,s as F}from"./index-Wyu0iiLy.js";import{u as I}from"./UserStore-AL2F8FDS.js";import{s as v,S as U}from"./Toast-BGAkXIA8.js";const H="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPMAAAAnCAYAAADaWX4GAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAArUSURBVHgB7V3ZURxJE04Q0pNCiyzYxgINOiL0psYCgQUaWSCwgMECgQU7skBgAbNvitA1a4EaC3aedf7f12T15tRUVx8zAv279UUMfdTZlZVHZVY3IgkJCQkJCQkJCQkJCQkJCSGsyQoxGAwyHPL19fVsbW3td5zzeobro7dv305dvvv37+8z7fv376PpdDqThISEpbEhHQGG3ZRLJh2ASQdk2h8/fvCY1ZX59u3bGQ4lM4ORD5F3xHOUf4r6dsDQhSQkJCyFWs3ch2k9zJD/Avkn79+/39c68xs3bpz7GZFv9OHDhyNJSEjojQVmVs25i9OBtINj2imOUxyLmzdvTt+8eVPYTDTBIRTO64QB0ratKZ6QkNANlZlNTaxas46JybR/KdMWYL7pxsZG4TNtHWhax7Q62k5r54SEJVAxMxjtWP5hZDLWK8e0t2/fnk4mk97MRocX6n9Wl460o7ZCISEhIYzSzLZrWWpeMO/OMsxroeb1R9S7GUqHwPgT6+VcEhISlkKpmcFsu9WNjY29VTGy1n1ex8hAcevWraH0BAQFnXM5Tsv6Eerimnva5B1nOS1ThPJq+kDTJ3Vp2tasoS22k+vlQt80fWDSZzXpPM78/pg8dWMsWm7W0MdY+Qp1Y+vTAihAj0kLWmSiz8eQJu+hHMsU0mJ8vboYFnVj1Xo+eHVE6VWTP5Oa+WLy+eMzY/8C86s1LcSja6mZHzx4QK2c06yGltySFcGGoUJAe8/R3lg6Qi2JQ/ln0H1MEA57HiIE+vTJrt1DnnQ3Hq4ueON3TPlCY+gLaSEgP30Fh3o5Q7+2HAEePnzIMT83fSnwXHvWEehHAFDXzrt37yam/j9wbyhxzNDPuzX9G6L8H9IS6OMRxmvk9a8XLTDOr3HYlXh7Y0z6oxhT6b6Fw4j111iHqcvSS5ReteV8+vhzmsIK6RzfXMJ9q2iO8eBYvJaWQNkTtLXvrtf1eME/EQ3aGXzIGCMDJ30YmQJCBy+PZOMAf8TgLKzTfScc+0imqqsIA5ZJpB3phk1YPpWDERMsE69vuPcyVoEto2M8lBbtqsRfAMrn0gFGkHWhxacQLaSBkbW9Ia27R48eBR2zKsxexuauq0OtgE4AvTLphqqfLoIjkfFRmo94ztCv9GyLWNdKCr3e7PPACy1cPkRM2hcu9tyx3gUBwTU3Dif6K0wSiXvc5nlQx6H8OshjwqUBZZjQ/+H+SZ25ivSJl3cWqxPX3ABUmo0daEE00YL5X8ml4/VPm6ATfoEZ1fIb+n2g9aB1FbYOCJXWWq8v0M5v7hw8MPSUR+lY1t+Z6d/fmr8TLdRpXcF5s12lDBENZJEQ5cDhcLfNFsymMBTi0FHTtA6+gKAXHEJhZG7tQwOMcXRaYFNNnKb2Sgay5ut1QoXLRDoC5Q66Wjuavyrjm911deq4VliWFpycaGforh8/fpx9+fKFWi1z5UF/KgC3ASnzhQmXIOjDJFLHgM/XxyLsA/Rn4F3v+XOM844hXp5rWubSArQ4sUscH6VmpqPCFMj8TKj0pTLoC3qmYxKW6xfkWXkYSjVBZm4VePiRnw9rHBLbCpu8zsS0+X4R7ez6s4x2/ukwTkCHVdBiDpwjvtBneNOVt05bxdhnFNaBMs/9OuTqMKf0wGdP/Qzs86rCsiUz2wU+HvaezaDSYd+k01z5pJp6DsrkMaY4DRG9VUcvPYEVKKVC+dRqOLP37DrVq4Pmzi/DQCD2mTlv7ZQyeAIaDAO/lflCiAAtXoXyhWiBuZNLS+gkn5hbm2DwjCf+Wh/XwT4og88JFLkicEekvSYfgW/+5jqfS0ZZMdZNwxd6OreAlxrmpKaGGTWnpZvCUCDEgak7l27Y9Nov6jIaH0AJ39Hk5X1lzq9VO6N9roHKiUehSUHaoXjp6KEp6/8CWmxZ+DQu6jL6tMB1V8FyYS+g7d38/M3e//r16zRSR2EvVuEXagOYxKTnxN4jfyidzhlZ6UrjGNZNIxM9zapESOC1+IsVjJ2xU0N1RtTmpVPCmRPGC3qtoLMCcW7rRLhu7TzzLA4Kl5ksCTzn0nVcFzAec303z9JFKFzb8zN0yaWlBAQe+YVr4pCV2wdWM1eD5CQXJvpEIlLXdigWhuLDOKeD9YJ2lJBzBGmQ8L4WryUmBYx6P12916qdYUXMaWfdBNEWp3wW73eACXUqq4U/niuhRQiBUKIrfxFrpyHtSpmbS0vQYIsOOvG87ERTeLQt7PvMlZniPNqc6PAI7sAjWBv0boE55wjqzty5rr3GbSrhHnFMzOoaA/A0UnbO0cC3uCQCMhD69UIuiV5unkH9ctVgTJNrPEjqE7NxobVwQb/PrsJTG6DFExyOQ3k1zZYtpAPQzj1LC2dO+zTSpcRCH8wOM4fiuj6Ioet3/hY2zGAODqRHBMNi3VRWTXjr0SZDG1OhM3yPJNY8lrEyaQkloiXCbmgjgb7UkZlb0yZvIYlrzduGpcVPh6+d5RdDF1qIx0hdXnP1l26MITtGBPP61saLkKMvYDFO5AqBPu2G7vuxdOm2bAjCaubCnGd+RmpXaOmxF7eLAgN54DMSPeeQSiTIpt1N1AQS0dNYFAyvce9I9/IyDnkvsJHhpE39nnZuDW7/C9yeqfOjF0LP2ga0VlAukxX3x0eof9zUgXsHSgsy25MALWoVAueCcYoyYsIQUu7lqZ6BWg7zaOLy6JLkozcfnum7+Q4zKJdOSgl9foY6c/8+50uThteQLj3YBS5PjMLM8HvhZS9kSVTMrAS64KD64SkHMiYGfBsDPQp0xgfjfnUTqMBvgIHKpQMYMAcBaUKX0l6lNj22dUVabxlty0BI526d3811MD/GabyMOddTuOx6k9f253SVn2dSWtCEzvUWhfMytMhiTlFahphPc9oYjPncKpem+dBzj8MwtOSCoCBtowIS5bZMv15GxqZYxfJo3WvcSY5BXQFOUG7F5IZyqZcmRYME/Evby6QjoI2dEyEKWgU1W0ZrGUzN20Ii4LpUuqEXQ6vp36RFfHN36X50cVCBFntyuXWzCSc1tJhIM2akZWh/gtlYUjTVgd9eRLlU4JZKaQc3TkWkrpE0962o2xHZ1b8wJ3KgmY65y4vnINTdJs2i2+W4kPeZfy/mQbVvpjS9ldLQ9r5uTs94j8Jo7fJ97OO61zj1zRSnvU79frLez58/uz21nEin/s4ijQ1mNV0rJ4Qro19wGYm+wgjCHTvtwDTdvzvw02xbmr7JTQh37twZ22dz/ZU4Okl+bTOXyy+rjpvWuX1pQSg9cv8lA+4j4L5xPO9pm1dyHV3V35O5Pmgd4y6v9dKzDMGeR7LMLVvMeBFzc0rpk9Ni0r6V88D0Lfp8lhahuWixFihY7jxa8161iwEPP3IhHTWHRrH829vbY7flEw9+9W7jhIR/IebMbOvRVld5K5B5oVW2+FG+JkbWl7RLRg549BISEnrC/252Yc4z6YCYY0FjffQ20mFSrZ1gfu5LQkLCSjDHzJ5H+4l0hAvQ63+0oEecHusstF+b5nj6tG5CwuoQ+m525Zyq+zh9F6YNoMDvZ2wxTEj4T2OBmdX7+lHUzNa3Xs7WLr+g0IVpxX0cH6f0TE5R7zRp44SEn4OgJ5lb8+AAY8gpkxZw/4ZGGZ9f3FzZC9cJCQntUBsW0tjhCKdcO2e8l5g2ISEhISEhISEhISEhISEhIeH/Df8Dt5RgdaoH53AAAAAASUVORK5CYII=",Z=W("todoStore",()=>{const r=A([]),o=A("all"),C=z(()=>o.value==="finish"?r.value.filter(e=>e.checked):o.value==="unfinish"?r.value.filter(e=>!e.checked):r.value),a=z(()=>r.value.filter(e=>!e.checked).length),d=async()=>{try{const e=await p.get("https://todoo.5xcamp.us/todos");r.value=e.data.todos.map(i=>({id:i.id,content:i.content,checked:!!i.completed_at}))}catch(e){return console.log(e)}};return{todos:r,currentFilter:o,filteredTodos:C,unfinishCount:a,getTodos:d,addTodo:async e=>{if(e.trim())return await p.post("https://todoo.5xcamp.us/todos",{todo:{content:e}}),await d(),!0},editTodo:async e=>(await p.put(`https://todoo.5xcamp.us/todos/${e.id}`,{todo:{content:e.content}}),await d(),!0),toggleTodo:async e=>(await p.patch(`https://todoo.5xcamp.us/todos/${e}/toggle`),await d(),!0),delTodo:async e=>(await p.delete(`https://todoo.5xcamp.us/todos/${e.id}`),await d(),!0),clearCompleted:()=>{const e=r.value.filter(l=>l.checked);let i=0;e.forEach(l=>{p.delete(`https://todoo.5xcamp.us/todos/${l.id}`).then(()=>{i++,i===e.length&&d()})})}}}),R={class:"todolist_page bg-primary p-3"},D={class:"d-flex flex-row"},X={class:"d-grid d-md-flex"},J={class:"ms-auto"},P={class:"d-none d-md-inline"},N={class:"container todolist"},G={class:"card input flex-row justify-content-between"},_=["placeholder"],K={class:"card card_list"},q={class:"tab"},$={class:"cart_content"},tt={class:"list"},et={class:"checkbox"},ot=["onUpdate:modelValue","onChange"],st={class:"actions"},nt=["onClick"],at=["onClick"],ct={class:"list_footer"},it={__name:"TodoList",setup(r){const{t:o}=E(),C=B(),a=Z(),d=I(),h=A(""),k=A(localStorage.getItem("nickname")||"");w(()=>{a.getTodos()});const S=async()=>{if(h.value.trim())try{const c=await a.addTodo(h.value);v("success",o("toast.addSuccess")),h.value=""}catch{v("error",o("toast.addFail"))}},M=async l=>{const{value:c}=await U.fire({title:o("todo.edit.title"),input:"text",inputValue:l.content,showCancelButton:!0,confirmButtonText:o("common.confirm"),cancelButtonText:o("common.cancel"),inputAttributes:{style:"width: 85%; box-sizing: border-box;"},inputValidator:s=>s.trim()?s.trim()===l.content.trim()?o("todo.edit.errors.noChange"):null:o("todo.edit.errors.empty")});if(c&&c.trim()!==l.content.trim()){const s={...l,content:c.trim()};a.editTodo(s),v("success",o("toast.editSuccess"))}},Q=async l=>{try{await a.delTodo(l),v("success",o("toast.delSuccess"))}catch{v("error",o("toast.delFail"))}},e=()=>{a.clearCompleted(),v("success",o("toast.clearSuccess"))},i=()=>{d.logout(),C.push("/login")};return(l,c)=>(x(),g("div",R,[t("div",D,[t("div",X,[c[4]||(c[4]=t("img",{src:H,alt:"logo",class:"img-fluid"},null,-1)),V(Y,{class:"ms-3 mt-3 mt-md-0"})]),t("div",J,[t("span",P,u(n(o)("todo.header",{name:k.value})),1),t("a",{href:"#",class:"btn ms-2",onClick:i},u(n(o)("common.logout")),1)])]),t("div",N,[t("div",G,[y(t("input",{type:"text",class:"input_text",placeholder:n(o)("todo.placeholder"),"onUpdate:modelValue":c[0]||(c[0]=s=>h.value=s),onKeydown:L(S,["enter"])},null,40,_),[[b,h.value]]),t("a",{href:"#",class:"btn_add",onClick:f(S,["prevent"])},"+")]),t("div",K,[t("ul",q,[t("li",{class:T({active:n(a).currentFilter==="all"}),onClick:c[1]||(c[1]=s=>n(a).currentFilter="all")},u(n(o)("todo.tabs.all")),3),t("li",{class:T({active:n(a).currentFilter==="unfinish"}),onClick:c[2]||(c[2]=s=>n(a).currentFilter="unfinish")},u(n(o)("todo.tabs.unfinish")),3),t("li",{class:T({active:n(a).currentFilter==="finish"}),onClick:c[3]||(c[3]=s=>n(a).currentFilter="finish")},u(n(o)("todo.tabs.finish")),3)]),t("div",$,[t("ul",tt,[(x(!0),g(j,null,O(n(a).filteredTodos,s=>(x(),g("li",{key:s.id},[t("label",et,[y(t("input",{type:"checkbox",class:"checkedMark","onUpdate:modelValue":m=>s.checked=m,onChange:m=>n(a).toggleTodo(s.id)},null,40,ot),[[F,s.checked]]),t("span",null,u(s.content),1)]),t("div",st,[t("a",{href:"#",class:"edit",onClick:f(m=>M(s),["prevent"])},"âœŽ",8,nt),t("a",{href:"#",class:"delete",onClick:f(m=>Q(s),["prevent"])},"ðŸ—‘",8,at)])]))),128))]),t("div",ct,[t("p",null,u(n(o)("todo.left",{count:n(a).unfinishCount})),1),t("a",{href:"#",onClick:f(e,["prevent"])},u(n(o)("todo.clearCompleted")),1)])])])])]))}};export{it as default};
